# Meeting Notes: 22-07-13

## Old Business

### localhost issue

Divyansh stated the localhost issue occurs on a shared server because the domain name `https://amp.dev` is used in the repo. The problem does not exist when using a local machine that correctly resolves localhost.

Solution: replace the Google domain name with target domain names.

### Irregularities with version-2

Divyansh will combine the best of version-1 and version-2 and create version-3.

## New Business

### Define Docker resources and Docker-resource-dependencies

Anant asked for a clear definition of internal and external resources.
  * Internal means: resources used to create a Docker instance.
  * External means: resources used by a production Docker instance.

#### External Resource

##### AMP libraries

Example *before* amp-optimization:
```
<script async src="https://cdn.ampproject.org/v0.js"></script>
<script async custom-element="amp-story" src="https://cdn.ampproject.org/v0/amp-story-1.0.js"></script>
```

Example *after* amp-optimization:
```
<script async src="https://cdn.ampproject.org/v0.mjs" type="module" crossorigin="anonymous"></script>
<script async nomodule src="https://cdn.ampproject.org/v0.js" crossorigin="anonymous"></script>

<script async src="https://cdn.ampproject.org/v0/amp-story-1.0.mjs" custom-element="amp-story" type="module" crossorigin="anonymous"></script>
<script async nomodule src="https://cdn.ampproject.org/v0/amp-story-1.0.js" crossorigin="anonymous" custom-element="amp-story"></script>
```

##### Fonts

Example:
```
<link rel="preload" as="font" type="font/ttf"   href="https://s3.amazonaws.com/benetta.net/fonts/recursive-woff2/Recursive-VF.ttf" crossorigin />

@font-face {
    font-family: Recursive-2019;
    src:url("https://s3.amazonaws.com/benetta.net/fonts/recursive-woff2/Recursive-VF.ttf") format("truetype");
    font-display: swap;
    text-align: initial;
    font-weight: 100 600;
    font-stretch: 25% 151%;
}
```

#### iFrame Content

Content featured in an iFrame is served from `https:\\benetta.io`

Example:
```
<amp-iframe
  data-iframe-label="0.6-21 Example: SMV Baseline"
  height="450px"
  layout="fixed-height"
  scrolling="yes"
  sandbox="allow-scripts allow-same-origin allow-popups allow-forms allow-popups-to-escape-sandbox allow-presentation allow-top-navigation"
  allow="fullscreen"
  frameborder="0"
  src="https://benetta.io/iframe/SDL-SML-down/item-16.html"
  title="Schema Markup Validator reading SDL example eg-0399-jsonld (local)"
  class="ap-o-sampler-iframe"
>
<div placeholder=""><div class="ap-o-sampler-iframe-source"></div></div>
</amp-iframe>
```

#### JSON endpoints

Text for Natural Language (NL) pages is rendered in Unicode and stored as JSON.
JSON endpoints are exposed to a page as a JSON list element and rendered using a Mustache template.

Example:
```
<amp-list
  width="auto"
  height="1"
  layout="fixed-height"
  template="must-1"
  binding="refresh"
  src="https://ontomatica.io/a/12010500001014723136/data-11.json"
><div placeholder>Loading ...</div><div fallback>Failed to load data.</div><div overflow class="list-overflow">See more</div>
</amp-list>
```
For the link:
  * https://ontomatica.io/a/12010500001014723136/

In the case above, JSON is served from ontomatica.io. In the future, JSON endpoints will be served from AWS-S3, e.g.
  * https://s3.amazonaws.com/benetta.net/data/

##### Structured Data and query services

All content pages will include Structured Data. Remote processors will read and present information about local structured data. A link in the accordion footer of each page will include the link to run the remote processor. A separate web page presented the processor output.

Example processor:
  * https://validator.schema.org/

#### JavaScript Applications

We serve JavaScript applications.
Here is an example from `afdsi.com`
  * https://afdsi.com/sparql-species/#/specierch/octopus

In the future, we will serve this type of JavaScript application from AWS-S3. For example:
  * https://s3.amazonaws.com/benetta.net/app/species/index.html#/specierch/octopus

### Describe `amp-search` operation

We spent meeting-time tracing the `amp-search` workflow. Jay agreed to document the workflow, as follows.

  1. `amp-autosuggest` loads a JSON file to present level-1 options. The query is:
    * https://amp.dev/search/autosuggest?__amp_source_origin=https%3A%2F%2Famp.dev

The response is:
```
{"items":["amp-3d-gltf","amp-3q-player","amp-access","amp-access-fewcents","amp-access-laterpay","amp-access-poool","amp-access-scroll","amp-accordion","amp-action-macro","amp-ad","amp-ad-custom","amp-ad-exit","amp-ad-network-adsense-impl","amp-ad-network-adzerk-impl","amp-ad-network-dianomi-impl","amp-ad-network-doubleclick-impl","amp-ad-network-fake-impl","amp-ad-network-nws-impl","amp-ad-network-smartadserver-impl","amp-ad-network-valueimpression-impl","amp-addthis","amp-analytics","amp-anim","amp-animation","amp-animation-polyfill","amp-apester-media","amp-audio","amp-auto-ads","amp-auto-lightbox","amp-autocomplete","amp-base-carousel","amp-beopinion","amp-bind","amp-bodymovin-animation","amp-brid-player","amp-brightcove","amp-byside-content","amp-cache-url","amp-call-tracking","amp-carousel","amp-connatix-player","amp-consent","amp-crypto-polyfill","amp-dailymotion","amp-date-countdown","amp-date-display","amp-date-picker","amp-delight-player","amp-dynamic-css-classes","amp-embedly-card","amp-experiment","amp-facebook","amp-facebook-comments","amp-facebook-like","amp-facebook-page","amp-fit-text","amp-font","amp-form","amp-fx-collection","amp-fx-flying-carpet","amp-geo","amp-gfycat","amp-google-document-embed","amp-gwd-animation","amp-hulu","amp-iframe","amp-iframely","amp-ima-video","amp-image-lightbox","amp-image-slider","amp-image-viewer","amp-img","amp-imgur","amp-inline-gallery","amp-inputmask","amp-instagram","amp-install-serviceworker","amp-intersection-observer-polyfill","amp-izlesene","amp-jwplayer","amp-kaltura-player","amp-layout","amp-lightbox","amp-lightbox-gallery","amp-link-rewriter","amp-list-load-more","amp-live-list","amp-loader","amp-mathml","amp-mega-menu","amp-megaphone","amp-minute-media-player","amp-mowplayer","amp-mraid","amp-mustache","amp-nested-menu","amp-next-page","amp-nexxtv-player","amp-o2-player","amp-onetap-google","amp-ooyala-player","amp-orientation-observer","amp-pan-zoom","amp-pinterest","amp-pixel","amp-playbuzz","amp-position-observer","amp-powr-player","amp-reach-player","amp-recaptcha-input","amp-redbull-player","amp-reddit","amp-render","amp-resize-observer-polyfill","amp-riddle-quiz","amp-script","amp-selector","amp-shadow-dom-polyfill","amp-sidebar","amp-skimlinks","amp-slides","amp-smartlinks","amp-social-share","amp-soundcloud","amp-springboard-player","amp-standalone","amp-state","amp-sticky-ad","amp-story","amp-story-360","amp-story-animation","amp-story-auto-ads","amp-story-auto-analytics","amp-story-bookend","amp-story-bookend","amp-story-captions","amp-story-consent","amp-story-cta-layer","amp-story-dev-tools","amp-story-education","amp-story-grid-layer","amp-story-grid-layer","amp-story-interactive","amp-story-interactive-binary-poll","amp-story-interactive-img-poll","amp-story-interactive-img-quiz","amp-story-interactive-poll","amp-story-interactive-quiz","amp-story-interactive-results","amp-story-page","amp-story-page","amp-story-page-outlink","amp-story-panning-media","amp-story-player","amp-story-share-menu","amp-story-shopping","amp-story-shopping-attachment","amp-story-shopping-config","amp-story-shopping-tag","amp-story-social-share","amp-stream-gallery","amp-subscriptions","amp-subscriptions-google","amp-tiktok","amp-timeago","amp-truncate-text","amp-twitter","amp-user-notification","amp-video","amp-video-docking","amp-video-iframe","amp-viewer-integration","amp-vimeo","amp-vine","amp-viqeo-player","amp-vk","amp-web-push","amp-wistia-player","amp-wordpress-embed","amp-yotpo","amp-youtube"]}
```
  2. For an item in autosuggest, user selects an option. For example type the word:
    * lightbox
  3. `amp-autosuggest` response:
    * amp-image-lightbox
    * amp-lightbox
    * amp-lightbox-gallery
  4. From autosuggest response, select
    * amp-lightbox
  5. `amp.dev` fires the query:
    * https://amp.dev/search/do?q=amp-lightbox&locale=en&__amp_source_origin=https%3A%2F%2Famp.dev
  6. Response:
```
{"result":{"totalResults":298,"currentPage":1,"pageCount":30,"components":[{"title":"amp-lightbox","description":"Displays elements in a full-viewport “lightbox” modal.","url":"https://amp.dev/documentation/components/amp-lightbox/","exampleUrl":"https://amp.dev/documentation/examples/components/amp-lightbox/?format=websites","playgroundUrl":"https://playground.amp.dev/?url=https%3A%2F%2Fpreview.amp.dev%2Fdocumentation%2Fexamples%2Fcomponents%2Famp-lightbox"},{"title":"amp-lightbox-gallery","description":"Provides a \"lightbox” experience. Upon user interaction, a UI component expands to fill the viewport until it is closed by the user.","url":"https://amp.dev/documentation/components/amp-lightbox-gallery-v1.0/"},{"title":"amp-image-lightbox","description":"Provides a lightbox effect for a specified image.","url":"https://amp.dev/documentation/components/amp-image-lightbox/","exampleUrl":"https://amp.dev/documentation/examples/components/amp-image-lightbox/?format=websites","playgroundUrl":"https://playground.amp.dev/?url=https%3A%2F%2Fpreview.amp.dev%2Fdocumentation%2Fexamples%2Fcomponents%2Famp-image-lightbox"}],"pages":[{"title":"Example: amp-lightbox","description":"The amp-lightbox component allows for a \"lightbox\" or similar experience - where upon user interaction a component expands to fill the viewport, ...","url":"https://amp.dev/documentation/examples/components/amp-lightbox.email/"},{"title":"Example: amp-image-lightbox","description":"The amp-image-lightbox component allows the user to expand an image to fill the viewport. Setup. Import the amp-image-lightbox component in the header. <script ...","url":"https://amp.dev/documentation/examples/components/amp-image-lightbox/"},{"title":"Example: amp-lightbox-gallery","description":"The amp-lightbox-gallery component provides a \"lightbox” experience for AMP components (e.g., amp-img, amp-carousel).","url":"https://amp.dev/documentation/examples/components/amp-lightbox-gallery/"},{"title":"Actions and events","description":"Fired when the carousel's current slide changes. // Slide number. event.index. amp-lightbox. Event, Description, Data. lightboxOpen ...","url":"https://amp.dev/documentation/guides-and-tutorials/learn/amp-actions-and-events/"},{"title":"Example: Image Galleries with amp-carousel","description":"The amp-lightbox-gallery component allows us to quickly create a lightbox gallery. <script async custom-element=\"amp-lightbox- ...","url":"https://amp.dev/documentation/examples/multimedia-animations/image_galleries_with_amp-carousel/"},{"title":"Documentation: amp-carousel","description":"amp-carousel amp-lightbox-gallery AMP for E-Commerce Getting Started Product ... <amp-carousel width=\"450\" height=\"300\" layout=\"responsive\" type=\"slides\" ...","url":"https://amp.dev/documentation/components/amp-carousel/"},{"title":"App like animation experiences in AMP – The AMP Blog","description":"Mar 28, 2019 ... When dismissing an image while exiting lightbox mode, the transition back to the inline image is sudden as you can see below: Inspired by ...","url":"https://blog.amp.dev/2019/03/28/app-like-animation-experiences-in-amp/"}]},"initial":false,"nextUrl":"https://amp.dev/search/do?q=amp-lightbox&locale=en&page=2"}
```

Note the last JSON statement:
```
"nextUrl":"https://amp.dev/search/do?q=amp-lightbox&locale=en&page=2"
```
The first response ("page=1") will fill an HTML form. If the response is longer than the target HTML form, the overflow content is placed in a second JSON response.
The second response ("page=2") is loaded when a user selects a "Show more" button.

For example, for "lightbox" the following links are triggered:
  * https://amp.dev/search/do?q=amp-lightbox&locale=en&page=2&__amp_source_origin=https%3A%2F%2Famp.dev
  * https://amp.dev/search/do?q=amp-lightbox&locale=en&page=3&__amp_source_origin=https%3A%2F%2Famp.dev
  * https://amp.dev/search/do?q=amp-lightbox&locale=en&page=4&__amp_source_origin=https%3A%2F%2Famp.dev

An AMP or Ontomatica developer creates the JSON file that is processed by the `amp-search` function.

### Progress with GitHub Action based CI/CD for amp.dev

Divyansh is continuing to customize the amp.dev GitHub Action-based CI/CD workflow.

Jay indicated the planned test of the GH Action CI/CD workflow will be:
  1. Change one menu item for amp.dev.
  2. Change the page linked to the changed menu item.
  3. Use S3-hosted fonts from benetta.net.
  4. Generate simple home pages for 5 sites (excluding the ontomatica.io home page, which is complicated)

### Ontomatica support for CI/CD project
  1. Jay will work with Ankita to provide AWS access for Divyansh.
  2. Jay will work with Ankita to set up all target domains and sub-domains.

---

## Phase-1

### AS-IS
  * amp.dev is dockered
  * supporting two ports:
    - amp.dev
    - amp.playground
  * supporting local development
    - Win-10 running WSL
    - MacBook running Monterey
  * docker operating process is documented

### TO-DO
  * Configure staging domain:
    - Ankita has implemented: https://ontomatica.com
    - Need to configure ontomatica.com without port:8080 dependency
    - test: search works
  * Model - Google QA process:
    - using Google appspot
      - https://console.cloud.google.com/appengine/start?project=basic-search-180910
  * Example - Google AMP QA site:
    - https://amp-dev-staging.appspot.com/documentation/components/amp-fit-text-v1.0/?format=websites

## Phase-2

### Development
  - Support 6 ports that map to 6 domains

### Workflow
  - Implement GitHub Actions based on Google `release-schedule` template or similar Google template.
  - Generate a `docker-production-instance` for a QA domain.

## Operating Notes
  - Divyansh says:
    - `docker-production-instance-linux` will perform as well as a `bare-metal-production-instance-linux`. The reason is that docker-as-a-service is integrated with the linux environment and does not entail additional overhead.
    - In contrast, `docker-development-instance-windows` (or mac) will be slower decause docker is an application and must work through windows/mac app services (overhead).

---

## Unfinished Business

### stripe-docker implemented as ontomatica.com
  - discussed local-host issue blocking search (where 8080 is injected into URL)
  - will be resolved

## New Business

### Domains and GitHub workflow
  - Divansh recommended using the word "staging" as the term for testing an instances on an EC2 server
  - Divyansh presented and will update Jay's draft CI/CD workflow using Mermaid diagramming tool
  - Rather than using domain.com for staging, Divyansh recommended using a sub-domain
  - Jay expressed idea that staging sub-domains be aligned with GitHub-registered developer names, e.g.
      - jay.ontomatica.io
      - ankita.ontomatica.io
      - divyansh.ontomatica.io
  - any developer may have only one sub-domain active at a time
  - similarly, a planned release will have only one sub-domain active at a time

### Acceptance testing for Phase 2 GitHub workflow
  - Jay stated that acceptance of Phase 2 will have a simple test:
    - Generation of a simplified home-page for each site
    - Generation of a simplified staging-page for each site
  - Jay and Ankita are responsibile for creating the content to be generated for the six home-page instances and six staging-page instances

### TO-DO
  - Jay will work with Ankita upon her return from travel to implement appropriate access and authorization for Divyansh to configure AWS and GitHub services for Phase 2.
  
### Planned site roll-out
  - Jay stated that site roll-out had two phases:
  1. All Natural Language pages, linked to target NL menu items, will be created but display a notice (in the NL): "This page is under construction"
  2. Over time, each "under construction" page will be replaced with content
  - Reasoning behind this approach:
    - Establish the basic structure (menus and navigation) for all sites
    - Incrementally improve sites "one page at a time"
    - One-page-at-a-time approach may minimize a developer's effort by focusing only on the target page
    - Target pages will be evaluated using sub-domain approach discussed above.

---

## Divyansh notes

### CI/CD workflow
  * Divyansh proposes this workflow
    - https://mermaid.live/view#pako:eNqtVMtugzAQ_BXLEeKSVk164xZI1UtUqc2ViwEDVrGJwPShiH_vgiHg4EBV9ZDI7M7OzK5hzzjMI4odbFlnXyAmmHRQc0LIzvLkQD9oZjvIjmhQJfZaJWRKOW2iASlpH0yYfC7IKbX7eoiVaf7pFkSEKS0hLouKrsc5L-ecyQMJGpGYZOWQ5oQJVfpClBgnpaSF3QJq-IdfbVlw8EWvDQ-rfWM5P3EqJDyGrQIcgpYLRSpryMSUyKqgu0nEbSUQ9BC-55UcAy8c10l3LmmuHJxxWiT0AkaSJA7yMeTvNvcbH3d2Zgh0_94YvejVBDQMzUSifA_gX3Tn6t1tL91d0Xv_4dH7m0dP9_g48Xgt3ePfPIA_9PDVEcJMJLNXVg4Yjep1N6bqwPBFxuxrtziagVQrdG_hTbxTLjWjDqv53EwmZBBccDpVHjiU8oBd9udq_tRbtjJMeHsXM0GymRvWtPWLHtUam1P76xZHf719KV5jwMEWjGA5twvVx-3e9bF6F2NSZbIpqQFanSIi6VPEZF5gp92zmFQyP36LEHebtQPtGUkKwrto_QOtex3r

### reverse proxy issue
  * I have fixed/completed the reverse proxy setup and fixed other minor issues that were Identified.
  1. Provisioned reverse proxy setup via Caddy. I have stopped Nginx and disabled it and configured Caddy Web Server which is simple to use, configure, and maintain and pretty fast as it's written in Go. It also has other benefits like a forever-free SSL certificate and hardened TLS stack. 
  2. "docker-compose" and "docker" were not running with the unprivileged user(ec2-user) and as running with the root user is not recommended for obvious reasons, I fixed this issue and now these can be run with the ec2-user. 
  3. I have set up a Caddy web server over docker containers, so that's easy to maintain and replicate. All apps are running on docker containers now.

## Jay notes

### Configurations
  * Ankita and I discussed DNS formalization for these domains
    - ontomatica.io
    - dailyfood.io
    - dailycare.io
    - electronic-label.io
    - eximdata.io
    - afdsi.org
  * Each domain will have a page like this
    - https://ontomatica.io/
    - https://afdsi.org/
  * Each domain will support subdomain configurations like this
<pre>
        dev.ontomatica.io
      stage.ontomatica.io
     ankita.ontomatica.io
        jay.ontomatica.io
   divyansh.ontomatica.io
</pre>
  * Illustration
    - https://afdsi.com/___supplier/stripe/subdomain-config/subdomains.svg

### Business development
  * We have an opportunity to work with Google to improve/extend the amp-dev project
  * Next step is to demonstrate a docker-amp-dev instance where the search function works correctly
  * When that link is stable, I'll set meetings with Google to discuss next steps

---

## Compute platforms

### AWS EC2

#### Static apps
  * Sample website:
    - https://afdsi.com/ontomatica-home/

#### Dynamic apps served from database
  * Web page:
    - https://wedge.ontomatica.io/
  * Example transaction:
    - https://wedge.ontomatica.io/Nobel-Prize-Winners_-_19-09-05/Wedge
    - https://wedge.ontomatica.io/Nobel-Prize-Winners_-_19-09-05/Wedge?q=facet_10:2/facet_42:793&group=facet_42
  * Note:
    - Ankita uses docker to configure instances for different EC2 servers
      - two wedge instances run on a "more powerful" server
      - other instances run on a "less powerful" server

#### AWS Lambda
  * Ankita configured this logic-intensive app to run on AWS Lambda:
    - https://klpuiljexh.execute-api.us-east-1.amazonaws.com/Prod/
  * Source data (which will be hosted on AWS/S3):
    - https://afdsi.com/data/onto-corporation-sans-brand/data.json
  * Example transaction on AWS Lambda:
    - https://klpuiljexh.execute-api.us-east-1.amazonaws.com/Prod/?url=https://afdsi.com/data/onto-corporation-sans-brand/data.json
  * Example transaction on Google Schema Markup Validator using the same data:
    - https://validator.schema.org/#url=https%3A%2F%2Fafdsi.com%2Fdata%2Fonto-corporation-sans-brand%2Fdata.json

### AWS S3

#### benetta.net domain and fonts
  * Fonts are implemented as follows (example):
```
    @font-face {
      font-family: Recursive-2019;
      src: url("https://s3.amazonaws.com/benetta.net/fonts/recursive-woff2/recursive-2019_11_22-20_38.woff2") format("woff2-variations");
      text-align: initial;
      font-weight: 100 1000;
      font-stretch: 25% 151%;
      font-display: swap;
    }
```

#### benetta.net domain and JavaScript
  * Example - JavaScript libraries and applications:
    - https://s3.amazonaws.com/benetta.net/app/species/index.html#/specierch/octopus
  * For comparison, here is the same app running from an EC2 server:
    - https://afdsi.com/sparql-species/#/specierch/octopus

#### Benetta JSON endpoints
  * Example page:
    - https://ontomatica.io/a/12120000001000011961/
  * JSON endpoint:
    - subset here for easier understanding (complete file will be on AWS/S3/benetta.net)
````
<script type="application/json">
{"items": [
  {"text":
    "<div>
    <b>This Privacy Policy provides our policies and procedures for collecting, using, and disclosing your information</b>
    <ol>
    <li type='A'><a class='underline' href='#summary'>Summary</a></li>
    <li type='A'><a class='underline' href='#complete-terms'>Complete Terms</a></li>
    </ol>
    <ol>
    <li type='1'><a class='underline' href='#terms-conditions'>Terms and Conditions and Your Consent</a></li>
    <li><a class='underline' href='#what-info'>What Information We Collect</a></li>
    <li><a class='underline' href='#how-we-use'>How We Use Your Information</a></li>
    <li><a class='underline' href='#your-choices'>Your Choices</a></li>
    <li><a class='underline' href='#safeguarding'>Safeguarding Your Information</a></li>
    <li><a class='underline' href='#share-info'>How We Share Your Information</a></li>
    <li><a class='underline' href='#links-to-sites'>Links to Other Sites</a></li>
    <li><a class='underline' href='#california-privacy'>Your California Privacy Rights</a></li>
    <li><a class='underline' href='#jurisdiction'>Jurisdiction</a></li>
    </ol>
    </div>"
  }
]}
</script>
````
  * Parser that formats JSON as HTML:
````
<template type="amp-mustache">
  {{{text}}}
</template>
````

## EC2 domains

### iFrame domain
  * Some pages on production domains will use iFrame to serve specific content
  * Browsers same-site policy blocks iframe unless content is served from a different site
  * Our site to serve content to an iframe used on production site pages:
    - benetta.io

### Production domains
  * ontomatica.io
  * dailyfood.io
  * dailycare.io
  * electronic-label.io
  * eximdata.io
  * afdsi.org

### For all domain.io
  * root
    - robots.txt
    - sitemap.xml
    - manifest.json
    - google_validation_ID.html
    - favicon.ico
  * /static/
    - files
  * /a/ (a for AMP files)
    - directory is 20 digit IDN
  * /s/ (s for system files)
    - directory is a logical name
  * /c/ (c for chemical files)
    - directory may be inchikey
  * /n/ (n for nalt RDF files)
    - file system TBD

## File System for all domains and s3.amazonaws.com/benetta.net

### Files
  * In general all files are *one* of the following:
    - index.html
    - styles.css
    - main.js
    - data.json
    - note.txt
    - image-widthValue-heightValue.png
    - diagram-widthValue-heightValue.svg
  
### Directories
  * In general, a directory is a *20 digit identifier*.
  * The first 18 digits have a structure based on data types (which we can easily decode).
  * The last two digits indicate the Natural Language of index.html in a specific directory.
  * The directory structure is flat; for all index.html pages coded as AMP, the directories will be:
    - https://domain.suffix/a/
    - examples:
      - Chinese  https://ontomatica.io/a/12370110501010001933/
      - French   https://ontomatica.io/a/12370110501010001936/
      - Hindi    https://ontomatica.io/a/12370110501010001939/
      - en-US    https://ontomatica.io/a/12370110501010001961/

## HTML \<head>
  * In general, an AMP HTML \<head> will include this information:
````
<meta name="page-locale" property="schema:Text" content="ar,cs,de,en-GB,en-US,es,fr,hi,it,ja,ko,pl,pt,ru,zh">
<link title="French" rel="canonical" type="text/html" hreflang="fr" href="https://ontomatica.io/a/12370110501010001936/">
<link title="Arabic [ar]" rel="alternate" type="text/html" hreflang="ar" href="https://ontomatica.io/a/12370110501010001931/">
<link title="Czech [cs]" rel="alternate" type="text/html" hreflang="cs" href="https://ontomatica.io/a/12370110501010001934/">
<link title="German [de]" rel="alternate" type="text/html" hreflang="de" href="https://ontomatica.io/a/12370110501010001938/">
<link title="English [en-GB]" rel="alternate" type="text/html" hreflang="en-GB" href="https://ontomatica.io/a/12370110501010001960/">
<link title="English [en-US]" rel="alternate" type="text/html" hreflang="en-US" href="https://ontomatica.io/a/12370110501010001961/">
<link title="Spanish [es]" rel="alternate" type="text/html" hreflang="es" href="https://ontomatica.io/a/12370110501010001953/">
<link title="French [fr]" rel="alternate" type="text/html" hreflang="fr" href="https://ontomatica.io/a/12370110501010001936/">
<link title="Hindi [hi]" rel="alternate" type="text/html" hreflang="hi" href="https://ontomatica.io/a/12370110501010001939/">
<link title="Italian [it]" rel="alternate" type="text/html" hreflang="it" href="https://ontomatica.io/a/12370110501010001941/">
<link title="Japanese [ja]" rel="alternate" type="text/html" hreflang="ja" href="https://ontomatica.io/a/12370110501010001942/">
<link title="Korean [ko]" rel="alternate" type="text/html" hreflang="ko" href="https://ontomatica.io/a/12370110501010001944/">
<link title="Polish [pl]" rel="alternate" type="text/html" hreflang="pl" href="https://ontomatica.io/a/12370110501010001948/">
<link title="Portuguese [pt]" rel="alternate" type="text/html" hreflang="pt" href="https://ontomatica.io/a/12370110501010001949/">
<link title="Russian [ru]" rel="alternate" type="text/html" hreflang="ru" href="https://ontomatica.io/a/12370110501010001950/">
<link title="Chinese [zh]" rel="alternate" type="text/html" hreflang="zh" href="https://ontomatica.io/a/12370110501010001933/">
````

## HTML content \<body>
Content will be managed in one of three formats:
  1. markdown
    - example markdown source:
      - https://github.com/ampproject/amphtml/blob/main/docs/release-schedule.md
    - example HTML generated from markdown source:
      - https://amp.dev/documentation/guides-and-tutorials/learn/spec/release-schedule/
  2. JSON
    - see above
  3. Native HTML (too complicated to generate from markdown; also home page uses JSON in accordion footer):
    - https://afdsi.com/ontomatica-home/

## Content management process

### Editing authorization
  * Follow the Google model:
    - https://github.com/ampproject/amp-github-apps/blob/main/owners/OWNERS.example

### Editing process
  - https://github.com/ampproject/amp.dev/blob/future/contributing/documentation.md
  - https://github.com/ampproject/amp.dev/blob/future/contributing/samples.md

### Sample MD document
  - https://github.com/ampproject/amphtml/blob/main/extensions/amp-accordion/amp-accordion.md

---

## Background: Google Accelerated Mobile Page (AMP)

It is important that Stripe fully understands how Google technology and methods work. Reasons:
  1. We want to demonstrate what we learned from Google by correctly applying their methods
  2. We want to "stand on their shoulders" to add value to their methods
  3. We want to stay current with Google updates to their methods
  4. We want to **minimize expense** by *leveraging* Google methods

Google AMP project (https://github.com/ampproject) has four main repositories:
  1. amp-html
     * enables JavaScript libraries for HTML
  2. amp-dev
     * enables AMP website
  3. amp-toolbox
     * tools to publish and host AMP pages
  4. amp-github-apps
     * apps for the amp-project

## 1 AMP-HTML

  * Important link:
    - https://github.com/ampproject/amphtml
  * Sample AMP-HTML workflows:
    - https://github.com/ampproject/amphtml/tree/main/.github/workflows

Google leaders:
  * Daniel Rozenberg
    - https://github.com/danielrozenberg
    - https://github.com/ampproject/cdn-configuration
  * Raghu Simha 
    - https://github.com/rsimha
    - https://github.com/ampproject/amphtml/blob/main/docs/release-schedule.md
    - https://amp.dev/documentation/guides-and-tutorials/learn/spec/release-schedule/

Google performs regular updates to the amp-html-libraries.
Here are examples of GitHub-Action-based production builds as described in `release-schedule`:
  *  https://github.com/ampproject/amphtml/actions/runs/2211747490
  *  https://github.com/ampproject/amphtml/actions/runs/2200511336

## 2 AMP-DEV
  * Important link:
    - https://github.com/ampproject/amp.dev
  * Google leader:
    - Sebastian Benz
      - https://github.com/sebastianbenz

## 3 AMP-TOOLBOX
  * Important link:
    - https://github.com/ampproject/amp-toolbox
    - https://github.com/erwinmombay/amp-toolbox/tree/modulepreload
  * Key tools:
    - Lint
      - https://github.com/erwinmombay/amp-toolbox/tree/modulepreload/packages/linter
    - Optimizer
      - https://github.com/erwinmombay/amp-toolbox/tree/modulepreload/packages/optimizer

Google leader:
  * Sebastian Benz
    - https://github.com/sebastianbenz

## 4 AMP-GITHUB-APPS
  * Important link:
    - https://github.com/ampproject/amp-github-apps

## Maintain code base at same level used by Google
  * Implement renovate bot
    - https://github.com/apps/renovate

## AMP-ADVICE

We can ask Google leaders for specific advice about part of the project.
In the past, Google leaders have helped us.
However, we must demonstrate *what* we have accomplished and *where* a problem occurs.
Google leaders almost always ask for a log file.

---

## Future projects

## Build production sites from single master GH repository
  * Generate approved content for target production sites.

### Related issues
  * We will need equivalent for AWS cloudfront (https://aws.amazon.com/cloudfront/)
    - https://github.com/ampproject/cloudflare-amp-optimizer
  * Optimization is currently part of amp.dev toolchain: server side optimization
    - https://amp.dev/documentation/guides-and-tutorials/optimize-and-measure/amp-optimizer-guide/?format=websites
  * Google cache is enabled if page is AMP-valid: signed exchange
    - https://amp.dev/documentation/guides-and-tutorials/optimize-and-measure/signed-exchange/?format=websites

## Migration from GitHub Action to CircleCI
  * Migrate to CircleCI when it is more economical than GitHub Actions

### Google CircleCI templates
  * Reference:
    - https://github.com/ampproject/amphtml/tree/main/.circleci
  * Example:
    - https://app.circleci.com/pipelines/github/ampproject/amphtml/23581/workflows/c6c69781-b3ba-4980-8530-2e45e9b32c32/jobs/475307

## Upgrade Grow development platform
  * Modify toolchain and workflow to seamlessly upgrade to new Grow release
    - Grow technical support will help mitigate breakage casued by upgrade
