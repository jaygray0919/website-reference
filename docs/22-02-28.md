# CI/CD Project Plan

## Project objectives

- From a single GitHub repository, generate separate sites for 6 companies that are part of a single Consortium

## Project Management

### Leadership

- Consortium's Project Manager (PM) resides in Jamnagar, Gujarat, India
- PM is point-of-contact
- PM will conduct regular calls/meeting with Stripe to review progress
- PM understands "how we work", sees the "big picture" and is trusted by Consortium management
- PM has Docker and node.js/Express experience
- PM controls Consortium AWS privileges and services and will provide appropriate AWS access, authorization and authentication

## Project Sequence

### Stage 1

- Docker [amp.dev master](https://github.com/ampproject/amp.dev)
- Label: Docker-LOCAL
- Target runtime environments: Win10 and AWS/EC2/Linux (Red Hat)

There are many actions that we do not expect will work in Docker-LOCAL. Examples:
- search
- server processes such as amp-optimizer

Learning what *doesn't work* for Stage 1 is just as important as learning *what does work*.

Upon delivery of Stage 1, Ontomatica will test the following:

*1a.* generate homepage for 1 site
- [ontomatica](https://afdsi.com/ontomatica-home/)

*1b.* generate sidebar menu level 1 and 2 and target page for level 2

*1c.* generate page with accordion footer
- example [link: accordion](https://ontomatica.io/a/12370110501010001939/)

*1d.* generate Natural Language (NL) site menu
- example [link: natural languages](https://ontomatica.io/a/12370110501010001939/)

*1e.* generate page with amp-list using double brace JSON {{text}}
- example [link: double braces](https://ontomatica.io/a/12370110501010001939/)

*1f.* generate page with amp-list using triple brace JSON {{{text}}}
- example [link: triple braces](https://ontomatica.io/a/12120000001000011961/)

*1g.* inject JSON-LD
- example [link: json-ld](https://ontomatica.io/a/12370110501010001939/)

*1h.* generate page using amp-iframe
- example [link: iFrame](https://afdsi.com/ontomatica-home/)

Ontomatica will require 1-2 weeks to test 1a. - 1h.

Stripe budget:
- \<$ amount\> (can include specific preliminary time to install amp.dev on Ubuntu)

### Stage 2

Stripe presents a design to support 6 different sites

Stripe budget:

- \<$ amount\>

### Stage 3

Stripe implements Docker for GitHub integration

- Label: Docker-DEV

Docker-DEV will support:

- GitHub MASTER-BRANCH workflow
- GitHub Actions
- Resources published on AWS/S3
- 6 site configuration
- 20 digit director structure
- Content tested during Stage 1

Stripe budget:

- \<$ amount\>


### Stage 4

Stripe implements server-side processing integration with Stage 3.

- Label: Docker-SERVICE

Docker-SERVICE examples:

- amp-optimizer
- Google Custom Search
- compression
- serviceworker

Stripe budget:

- \<$ amount\>

### Stage 5

Stripe implements testing for Stage 4.

- Label: Docker-QA

Docker-QA example:

- Run different versions of [Stage 3 + Stage 4]

Stripe budget:

- \<$ amount\>


### Stage 6

Stripe implements production for Stage 5.

- Label: PROD

PROD example:

- Configure 6 sites that have been tested in Stage 5.
- Deploy using AWS Cloudfront

Stripe budget:

- \<$ amount\>

# Documentation for Stage 1

## How AMP Works

- [AMP overview](https://amp.dev/about/how-amp-works/)
- [AMP overview source](https://github.com/ampproject/amp.dev/blob/future/pages/content/amp-dev/about/how-amp-works.html)
- [AMP documentation repository](https://github.com/ampproject/amp.dev/)
***
- [AMP production services end-to-end](https://github.com/ampproject/amphtml/blob/main/docs/getting-started-e2e.md)
- [AMP production services repository](https://github.com/ampproject/amphtml/)

## AMP sites

- [amp.dev production instance](https://amp.dev/about/websites/)
- [amp playground \(seen in visualization\)](https://playground.amp.dev/)
- [amp pixi \(seen in visualization\)](https://amp.dev/page-experience/)

## Google

- Google [instructions: installation](https://github.com/ampproject/amp.dev)
- Google [instructions: contributing documentation](https://github.com/ampproject/amp.dev/blob/future/contributing/documentation.md)
- Google [instructions: contributing samples 1](
https://github.com/ampproject/amp.dev/blob/future/contributing/samples.md)
- Google [instructions: contributing samples 2](https://gist.github.com/sebastianbenz/45d3dae499f35dedb65e01546356ff7a)
- Google [boilerplate link](https://github.com/ampproject/amp.dev/blob/future/boilerplate/templates/index.html)

## Contribution by 3rd party developer

- [Example 1](https://github.com/ampproject/amp.dev/pull/6013)
- [Example 2](https://github.com/ampproject/amp.dev/blob/future/examples/source/visual-effects/CSS_animation_in_email.html)

## From development to production

### Examples

#### Accordion

- amp-accordion [markdown page](https://github.com/ampproject/amphtml/blob/main/extensions/amp-accordion/amp-accordion.md)
- amp-accordion [production page](https://amp.dev/documentation/components/amp-accordion/)

#### List
- amp-list [markdown page](https://github.com/ampproject/amphtml/blob/master/extensions/amp-list/amp-list.md)
- amp-list [production page](https://amp.dev/documentation/components/amp-list/?format=websites)

### Natural Language items

- [localization 1](https://github.com/ampproject/amp.dev/issues/4800)
- [localization 2](https://github.com/ampproject/amp.dev/pull/4969/commits/2bb95c3e4043b6ece6da156d46501fb5380d2eef)

## Google instructions

- GitHub actions [link - workflows](https://github.com/ampproject/amphtml/tree/main/.github/workflows)

## Google example

- Staging on appspot.com
  - https://amp-dev-staging.appspot.com/
  - https://amp-dev-staging.appspot.com/about/websites-2021/
  - https://cloud.google.com/appengine/docs/standard/python3/an-overview-of-app-engine

## Relevant, insightful, important Google GitHub dialog

### Google discussion

- Improving project workflow [link - discussion](https://github.com/ampproject/amp.dev/issues/3330)

### Google Docker project

- [amp.dev and Docker project](https://github.com/ampproject/amp.dev/pull/5989)

> "I can't get Grow to run on app engine."

- note: we don't use appengine; we deploy on AWS Cloudfront

### Issues

- https://github.com/ampproject/amp.dev/issues/5110
- https://github.com/ampproject/amp.dev/issues/6067
- https://github.com/ampproject/amp.dev/issues/6204
- https://github.com/ampproject/amphtml/issues/28168

### Pulls

- https://github.com/ampproject/amp.dev/pull/3733
- https://github.com/ampproject/amp.dev/pull/4018
- https://github.com/ampproject/amp.dev/pull/4924/files/3bb0b820dbc47e235db890aad5875f24712a6fe9..ec957e2d1b2a8f3a555dca217ce0ae8eec30acca
- https://github.com/ampproject/amp.dev/pull/5047
- https://github.com/ampproject/amp.dev/pull/5224/files/dc082fe19c48703efd8b33226ca3f0fd3883533d..6ba596e30ab7bd1d64bb0805c6f3787c24038add
- https://github.com/ampproject/amp.dev/pull/5292
- https://github.com/ampproject/amp.dev/pull/5467/files/4c899d45345978016c5b3786b82e30a0d77b7e3e..a5a0f58fe05f534f5c7f74304132515cdbbbdc85
- https://github.com/ampproject/amp.dev/pull/5989/files/7b4a42ab74fba5f960148fe5aad3799e1ce82d36..75689aa6216573baf4c635f222de182584970a1b
- https://github.com/ampproject/amp.dev/pull/6024
- https://github.com/ampproject/amp.dev/pull/6041
- https://github.com/ampproject/amp.dev/pull/6205

